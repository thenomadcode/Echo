{
  "projectName": "marketing-site-scaffold",
  "branchName": "feature/marketing-site-scaffold",
  "userStories": [
    {
      "id": "S01",
      "title": "Create Astro project scaffold",
      "priority": 1,
      "passes": true,
      "ultrawork": true,
      "acceptanceCriteria": [
        "Create apps/marketing directory with Astro 6 beta (^6.0.0-beta.2)",
        "Create package.json with name 'marketing', type 'module', correct scripts (dev, build, preview)",
        "Install dependencies: astro, @astrojs/cloudflare, @astrojs/mdx, @astrojs/react, react, react-dom, clsx, tailwind-merge, class-variance-authority, lucide-react",
        "Install devDependencies: @tailwindcss/vite, tailwindcss, @types/react, @types/react-dom, typescript",
        "Create tsconfig.json matching monorepo standards (strict mode, ESNext, bundler resolution)",
        "Create astro.config.mjs with Cloudflare adapter, React integration, MDX integration, Tailwind vite plugin",
        "Create .gitignore for Astro-specific files (dist, .astro, node_modules)",
        "Dev server configured to run on port 3003",
        "Create public/robots.txt",
        "Create public/images/.gitkeep"
      ]
    },
    {
      "id": "S02",
      "title": "Configure Tailwind v4 with design system",
      "priority": 2,
      "passes": true,
      "ultrawork": false,
      "acceptanceCriteria": [
        "Tailwind v4 configured via @tailwindcss/vite in astro.config.mjs",
        "Create src/styles/global.css with @import 'tailwindcss'",
        "Copy CSS variables from apps/web/src/index.css (colors, spacing, radii)",
        "Copy dark mode variables (.dark class) from apps/web",
        "Configure same font families: DM Sans (body), Plus Jakarta Sans (headings), JetBrains Mono (mono)",
        "Add Google Fonts preconnect and stylesheet links",
        "Create src/lib/utils.ts with cn() utility using clsx and tailwind-merge"
      ]
    },
    {
      "id": "S03",
      "title": "Create base layouts and placeholder page",
      "priority": 3,
      "passes": true,
      "ultrawork": false,
      "acceptanceCriteria": [
        "Create src/layouts/BaseLayout.astro with HTML5 boilerplate",
        "BaseLayout includes proper <head> with charset, viewport, title slot",
        "BaseLayout imports global.css and configures fonts",
        "Add theme script for dark mode persistence (check localStorage, system preference)",
        "Create src/layouts/PageLayout.astro extending BaseLayout (for standard pages)",
        "Create src/layouts/LegalLayout.astro extending BaseLayout (simpler, for legal pages)",
        "Create src/pages/index.astro with placeholder content",
        "Placeholder shows Echo logo, 'Coming Soon' text, link to main app",
        "Create empty src/components/.gitkeep",
        "BROWSER TEST: Navigate to http://localhost:3003, verify placeholder page renders",
        "BROWSER TEST: Verify 'Coming Soon' or 'Echo' text is visible on the page",
        "BROWSER TEST: Verify dark mode toggle works (if implemented) or dark class applies correctly"
      ]
    },
    {
      "id": "S04",
      "title": "Configure shadcn/ui for Astro",
      "priority": 4,
      "passes": true,
      "ultrawork": true,
      "acceptanceCriteria": [
        "@astrojs/react integration installed and configured in astro.config.mjs",
        "Create components.json matching apps/web style (baseColor neutral, cssVariables true)",
        "Configure components.json aliases: components @/components, utils @/lib/utils, ui @/components/ui",
        "Create src/components/ui/ directory",
        "Add button.tsx component from shadcn/ui (copy from apps/web or use CLI)",
        "Button component uses CVA for variants, cn() for class merging",
        "Verify React components work with client:load directive in Astro",
        "Install class-variance-authority for component variants"
      ]
    },
    {
      "id": "S05",
      "title": "Set up MDX content collections",
      "priority": 5,
      "passes": false,
      "ultrawork": true,
      "acceptanceCriteria": [
        "@astrojs/mdx integration installed and configured",
        "Create src/content/config.ts with Zod schemas for all collections",
        "Define 'pages' collection schema: title, description, draft, template",
        "Define 'features' collection schema: title, description, icon, order, category",
        "Define 'testimonials' collection schema: name, company, role, avatar, rating, featured",
        "Define 'changelog' collection schema: version, date, title, tags",
        "Define 'faq' collection schema: question, category, order",
        "Define 'legal' collection schema: title, lastUpdated, slug",
        "Define 'pricing' collection schema: name, price, currency, interval, popular, features, cta, ctaLink",
        "Create directory structure: src/content/{pages,features,testimonials,changelog,faq,legal,pricing}/",
        "Add .gitkeep placeholder in each content directory",
        "Create src/pages/[...slug].astro for dynamic page routing from pages collection",
        "Create src/pages/legal/[...slug].astro for legal pages routing",
        "Create src/pages/changelog/[...slug].astro for changelog routing"
      ]
    },
    {
      "id": "S06",
      "title": "Configure Cloudflare deployment via Alchemy",
      "priority": 6,
      "passes": false,
      "ultrawork": true,
      "acceptanceCriteria": [
        "@astrojs/cloudflare adapter installed (^13.0.0-beta.1)",
        "astro.config.mjs configured with output: 'server' or 'hybrid' for Cloudflare",
        "Update packages/infra/alchemy.run.ts to include marketing site deployment",
        "Add Astro site configuration in alchemy.run.ts with cwd pointing to apps/marketing",
        "Marketing site deploys separately from web app (different Worker/Pages instance)",
        "Console log outputs marketing site URL after deployment",
        "Verify build outputs to correct directory for Cloudflare (dist/)"
      ]
    },
    {
      "id": "S07",
      "title": "Integrate with Turborepo",
      "priority": 7,
      "passes": false,
      "ultrawork": false,
      "acceptanceCriteria": [
        "Verify turbo.json recognizes apps/marketing automatically via apps/* glob",
        "package.json scripts work with Turborepo: dev, build",
        "Running 'bun run dev' from root starts marketing dev server alongside other apps",
        "Running 'bun run build' from root builds marketing site",
        "Add 'dev:marketing' script to root package.json: turbo -F marketing dev",
        "Verify no conflicts with existing turbo tasks"
      ]
    }
  ]
}
